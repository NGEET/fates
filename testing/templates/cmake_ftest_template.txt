set(test_sources {file_name})

set(NETCDF_C_DIR ${{NETCDF_C_PATH}})
set(NETCDF_FORTRAN_DIR ${{NETCDF_F_PATH}})

FIND_PATH(NETCDFC_FOUND libnetcdf.a ${{NETCDF_C_DIR}}/lib)
FIND_PATH(NETCDFF_FOUND libnetcdff.a ${{NETCDF_FORTRAN_DIR}}/lib)


include_directories(${{NETCDF_C_DIR}}/include
                    ${{NETCDF_FORTRAN_DIR}}/include)

link_directories(${{NETCDF_C_DIR}}/lib
                ${{NETCDF_FORTRAN_DIR}}/lib
                ${{PFUNIT_TOP_DIR}}/lib)
                
add_executable({executable_name} ${{test_sources}})

target_link_libraries({executable_name} 
                  netcdf
                  netcdff
                  fates
                  csm_share
                  funit)