<?xml version="1.0"?>
<testlist version="2.0">

  <test name="ERI_Ly15" grid="f09_g16_gl20" compset="THISTG">
    <machines>

      <machine name="edison" compiler="intel" category="prebeta">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

      <machine name="yellowstone" compiler="pgi" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERI_Ly44" grid="f09_g16_gl5" compset="TRCP85G1">
    <machines>

      <machine name="hobart" compiler="intel" category="prebeta">
        <options>
          <option name="wallclock">1:59</option>
        </options>
      </machine>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">0:30</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_D_Ld9" grid="f19_g16_gl4" compset="IGCLM45" testmods="cism/override_glc_frac">
    <machines>

      <machine name="yellowstone" compiler="pgi" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
          <option name="comment">Make sure glc override options work correctly, and restart properly. Note that we do not generate cism history files in this test, but that is okay: this test is about what is sent to the coupler, not what is output by CISM. (And currently CISM history files do not restart properly in this test.)</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_Ly11" grid="f09_g16_gl20" compset="T1850G">
    <machines>

      <machine name="yellowstone" compiler="gnu" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_Ly11" grid="f09_g16_gl20" compset="T1850G" testmods="cism/oneway">
    <machines>

      <machine name="yellowstone" compiler="gnu" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
          <option name="comment">(3-3-16) identical to an existing non-oneway test, which generates some non-zero runoff fluxes</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_D_Ly3" grid="f09_g16_gl5" compset="TG1" testmods="cism/noevolve">
    <machines>

      <machine name="yellowstone" compiler="gnu" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
          <option name="comment">ice evolution off is the typical operation of cism within cesm, so test that for both CISM1 and CISM2</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_D_Ly3" grid="f09_g16_gl4" compset="TG" testmods="cism/noevolve">
    <machines>

      <machine name="yellowstone" compiler="pgi" category="aux_glc">
        <options>
          <option name="wallclock">0:30</option>
          <option name="comment">ice evolution off is the typical operation of cism within cesm, so test that for both CISM1 and CISM2</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_Ly20_N2_P2" grid="f09_g16_gl10" compset="TG1">
    <machines>

      <machine name="yellowstone" compiler="pgi" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

      <machine name="yellowstone" compiler="pgi" category="prealpha">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_Ly3" grid="f09_g16_gl4" compset="TG">
    <machines>

      <machine name="bluewaters" compiler="pgi" category="prebeta">
        <options>
          <option name="wallclock">0:50</option>
          <option name="comment">included simply to have a test on bluewaters</option>
        </options>
      </machine>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
          <option name="comment">include one test of the typical production resolution for CISM2</option>
        </options>
      </machine>

      <machine name="yellowstone" compiler="intel" category="prealpha">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_Ly5" grid="T31_g37_gl4" compset="IGCLM45" testmods="clm/glcMEC_long">
    <machines>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">1:59</option>
          <!-- 2016-10-25: There is a big jump in memory at the start of year
               2. In the 5-year run, things then stay roughly constant after
               that. Note that the start of year 2 is when CISM does its first
               prognostic solve, so I think this is expected behavior. Thus, I
               believe this is not actually a problem. -->
          <option name="memleak_tolerance">0.34</option>
          <option name="comment">Need IG ERS test to catch problems with fields sent before the end of the first year after restart. Also use glcMEC_long testmods to get shorter snow_persistence_max - the main motivation here is to have a long ERS test that checks restart of the snow_persistence stuff (which more belongs in the aux_clm test list, but was added here to avoid needing to add a long ERS test to that test list)... this is mainly needed because we do not have an IG test that uses spun-up initial conditions, so we currently need a long test to completely test the restartability of the snow_persistence stuff. Also note that this is the only multi-year non-TG test in the test list, so this is the one test that a production-like configuration can run for a few years. Consider moving this to the aux_clm45 test list once this test can be made shorter, either through use of initial conditions and/or moving to f10 resolution.</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="NCK_Ly3" grid="f09_g16_gl20" compset="TRCP85G">
    <machines>

      <machine name="hobart" compiler="pgi" category="prebeta">
        <options>
          <option name="wallclock">1:59</option>
        </options>
      </machine>

      <machine name="yellowstone" compiler="pgi" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D" grid="T31_g37_gl20" compset="IGCLM45" testmods="cism/test_coupling">
    <machines>

      <machine name="yellowstone" compiler="gnu" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
          <option name="comment">Basically duplicates a similar test on hobart_nag; I want a version on yellowstone so we do not need to do baseline comparisons on hobart</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D" grid="f09_g16_gl10" compset="TG1">
    <machines>

      <machine name="yellowstone" compiler="gnu" category="aux_glc">
        <options>
          <option name="wallclock">0:30</option>
        </options>
      </machine>

      <machine name="yellowstone" compiler="pgi" category="aux_glc">
        <options>
          <option name="wallclock">0:30</option>
        </options>
      </machine>

      <machine name="yellowstone" compiler="gnu" category="prealpha">
        <options>
          <option name="wallclock">0:30</option>
          <option name="comment">Include a single-processor test, because cime changes sometimes break single-processor runs</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D" grid="f09_g16_gl5" compset="TG1">
    <machines>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">0:30</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D_Ld5_P24x1" grid="T31_g37_gl20" compset="IGCLM45" testmods="cism/test_coupling">
    <machines>

      <machine name="hobart" compiler="nag" category="aux_glc">
        <options>
          <option name="wallclock">1:59</option>
          <!-- 2016-10-25: There is an increase of about 10 MB per day over the
               5 days of this test. This may truly be a memory leak. But this
               'test_coupling' configuration is a hacky configuration made just
               for testing, so I'm not too concerned about it.  -->
          <option name="memleak_tolerance">0.24</option>
          <option name="comment">IG nag debug test, to check logic for fields sent from glc to lnd</option>
        </options>
      </machine>

      <machine name="hobart" compiler="nag" category="prealpha">
        <options>
          <option name="wallclock">1:59</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D_Ly1" grid="f09_g16_gl20" compset="T1850G">
    <machines>

      <machine name="yellowstone" compiler="pgi" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D_Ly1" grid="f09_g16_gl20" compset="THISTG">
    <machines>

      <machine name="yellowstone" compiler="gnu" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D_Ly1" grid="f09_g16_gl20" compset="TG">
    <machines>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D_Ly1" grid="f09_g16_gl20" compset="TG" testmods="cism/trilinos">
    <machines>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

      <machine name="yellowstone" compiler="intel" category="prebeta">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D_Ly1_P24x1" grid="f09_g16_gl4" compset="TG">
    <machines>

      <machine name="hobart" compiler="nag" category="aux_glc">
        <options>
          <option name="wallclock">1:59</option>
          <option name="comment">short nag debug test of CISM2 at production resolution, to test options specific to the production resolution (currently, which_ho_babc differs at the production resolution)</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D_Ly3" grid="f09_g16_gl5" compset="TG1">
    <machines>

      <machine name="hobart" compiler="nag" category="aux_glc">
        <options>
          <option name="wallclock">1:59</option>
          <option name="comment">multi-year nag debug test of CISM1</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D_Ly3_P24x1" grid="f09_g16_gl20" compset="TG">
    <machines>

      <machine name="hobart" compiler="nag" category="aux_glc">
        <options>
          <option name="wallclock">1:59</option>
          <option name="comment">multi-year nag debug test of CISM2 at coarse resolution</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_Ly5_N2_P2_D" grid="f09_g16_gl5" compset="T1850G1">
    <machines>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">0:30</option>
          <option name="comment">include a multi-instance debug test</option>
        </options>
      </machine>

      <machine name="yellowstone" compiler="intel" category="prebeta">
        <options>
          <option name="wallclock">0:30</option>
        </options>
      </machine>

    </machines>
  </test>
</testlist>
